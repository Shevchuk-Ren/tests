{"version":3,"sources":["redux/phoneBook/phonebook-actions.js","redux/auth/auth-operations.js","redux/auth/auth-slice.js","redux/phoneBook/phonebook-reducer.js","redux/store.js","redux/auth/auth-selectors.js","components/Navigation/Navigation.styled.jsx","components/Navigation/Navigation.js","icons/rock.jpg","components/UserMenu/UserMenu.styled.jsx","components/UserMenu/UserMenu.js","components/AuthNav/AuthNav.styled.jsx","components/AuthNav/AuthNav.js","components/AppBar/AppBar.styled.jsx","components/AppBar/AppBar.js","components/Container/Container.styled.jsx","components/Container/Container.js","components/PrivateRouter.js","components/PublicRoute.js","components/App/App.js","index.js"],"names":["fetchPhonebookRequest","createAction","fetchPhonebookSuccess","fetchPhonebookError","addPhonebookRequest","addPhonebookSuccess","addPhonebookError","deletePhonebookRequest","deletePhonebookSuccess","deletePhonebookError","filterContacts","axios","defaults","baseURL","console","log","token","headers","common","Authorization","authOperations","register","createAsyncThunk","credentials","a","post","data","logIn","logOut","refreshCurrentUser","_","thunkAPI","getState","state","tokenPersisted","auth","rejectWithValue","get","authSlice","createSlice","name","initialState","user","email","isLoggedIn","isFetchingCurrentUser","extraReducers","fulfilled","action","payload","pending","rejected","loading","createReducer","filterReducer","contacts","filter","id","phoneReducer","combineReducers","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","authReducer","phoneBook","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","logger","devTools","process","persistor","persistStore","authSelectors","getIsLoggedIn","getUsername","getIsFetchingCurrent","LinkNav","styled","NavLink","Navigation","useSelector","to","exact","activeClassName","Wrapper","div","Avatar","img","Title","span","Name","Button","button","UserMenu","dispatch","useDispatch","avatar","defaultAvatar","src","alt","width","type","onClick","AuthNav","Header","header","AppBar","Container","children","PrivateRoute","redirectTo","routeProps","PublicRoute","restricted","shouldRedirect","HomeView","lazy","RegisterView","LoginView","PhonebookView","App","useEffect","fallback","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.097f7d74.chunk.js","sourcesContent":["import { createAction } from '@reduxjs/toolkit';\n\nexport const fetchPhonebookRequest = createAction('phonebook/fetchContact');\nexport const fetchPhonebookSuccess = createAction(\n  'phonebook/fetchContactSuccess',\n);\nexport const fetchPhonebookError = createAction('phonebook/fetchContactError');\n\nexport const addPhonebookRequest = createAction('phonebook/addContact');\nexport const addPhonebookSuccess = createAction('phonebook/addContactSuccess');\nexport const addPhonebookError = createAction('phonebook/addContactError');\n\nexport const deletePhonebookRequest = createAction('phonebook/deleteContact');\nexport const deletePhonebookSuccess = createAction(\n  'phonebook/deleteContactSuccess',\n);\nexport const deletePhonebookError = createAction(\n  'phonebook/deleteContactError',\n);\n\nexport const filterContacts = createAction('phonebook/cgangeFilter');\n","import { createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\nconsole.log(axios.defaults, `AXIOS api`);\n\nconst token = {\n  set(token) {\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n  },\n  unset() {\n    axios.defaults.headers.common.Authorization = '';\n  },\n};\n\nconst register = createAsyncThunk('auth/register', async credentials => {\n  try {\n    const { data } = await axios.post('/users/signup', credentials);\n    console.log(data, `data in register`);\n    token.set(data.token);\n    return data;\n  } catch (error) {\n    console.log(error, `error register`);\n  }\n});\n\nconst logIn = createAsyncThunk('auth/login', async credentials => {\n  try {\n    const { data } = await axios.post('/users/login', credentials);\n    console.log(data, `data in login`);\n    console.log(axios.defaults, `defaults axios`);\n    token.set(data.token);\n    return data;\n  } catch (error) {\n    console.log(error, `error in login`);\n  }\n});\n\nconst logOut = createAsyncThunk('auth/logout', async () => {\n  try {\n    const { data } = await axios.post('/users/logout');\n    console.log(`data in logout`);\n    console.log(axios.defaults, `defaults axios logout`);\n    token.unset();\n  } catch (error) {\n    console.log(error, `error in logout`);\n  }\n});\n\nconst refreshCurrentUser = createAsyncThunk(\n  'auth/current',\n  async (_, thunkAPI) => {\n    console.log(thunkAPI.getState(), `thunkAPI in refresh`);\n    const state = thunkAPI.getState();\n    const tokenPersisted = state.auth.token;\n    if (tokenPersisted === null) {\n      console.log(`No token here`);\n      return thunkAPI.rejectWithValue();\n    }\n    token.set(tokenPersisted);\n\n    try {\n      const { data } = await axios.get('/users/current');\n      console.log(data, `response in refresh`);\n      return data;\n    } catch (error) {\n      console.log(error, `error in refresh`);\n    }\n  },\n);\n\nconst authOperations = {\n  register,\n  logIn,\n  logOut,\n  refreshCurrentUser,\n};\n\nexport default authOperations;\n","import { createSlice } from '@reduxjs/toolkit';\nimport authOperations from './auth-operations';\n\nconst initialState = {\n  user: { name: null, email: null },\n  token: null,\n  isLoggedIn: false,\n  isFetchingCurrentUser: false,\n};\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  extraReducers: {\n    [authOperations.register.fulfilled](state, action) {\n      console.log(state, `state in slice to register`);\n      console.log(action.payload, `payload in slice to register`);\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.isLoggedIn = false;\n    },\n    [authOperations.logIn.fulfilled](state, action) {\n      console.log(state, `state in slice to login`);\n      console.log(action.payload, `payload in slice to login`);\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.isLoggedIn = true;\n    },\n    [authOperations.logOut.fulfilled](state, action) {\n      console.log(state, `state in slice to logout`);\n      console.log(action.payload, `payload in slice to logout`);\n      state.user = { name: null, email: null };\n      state.token = null;\n      state.isLoggedIn = false;\n    },\n    [authOperations.refreshCurrentUser.pending](state, action) {\n      console.log(state, `state in slice to refresh`);\n      console.log(action.payload, `payload in slice to refresh`);\n\n      state.isFetchingCurrentUser = true;\n    },\n    [authOperations.refreshCurrentUser.fulfilled](state, action) {\n      console.log(state, `state in slice to refresh`);\n      console.log(action.payload, `payload in slice to refresh`);\n      state.user = { ...action.payload };\n      state.isLoggedIn = true;\n      state.isFetchingCurrentUser = false;\n    },\n    [authOperations.refreshCurrentUser.rejected](state, _) {\n      console.log(state, `state in slice to refresh rejected`);\n\n      state.isFetchingCurrentUser = false;\n    },\n  },\n});\n\nexport default authSlice.reducer;\n","import { combineReducers } from 'redux';\nimport { createReducer } from '@reduxjs/toolkit';\n\nimport {\n  addPhonebookError,\n  addPhonebookRequest,\n  addPhonebookSuccess,\n  deletePhonebookError,\n  deletePhonebookRequest,\n  deletePhonebookSuccess,\n  fetchPhonebookError,\n  fetchPhonebookRequest,\n  fetchPhonebookSuccess,\n} from './phonebook-actions';\n\nconst initialStateFilter = '';\nconst initialStateContacts = [];\n\nconst loading = createReducer(false, {\n  [addPhonebookRequest]: () => true,\n  [addPhonebookSuccess]: () => false,\n  [addPhonebookError]: () => false,\n  [deletePhonebookRequest]: () => true,\n  [deletePhonebookSuccess]: () => false,\n  [deletePhonebookError]: () => false,\n  [fetchPhonebookRequest]: () => true,\n  [fetchPhonebookSuccess]: () => false,\n  [fetchPhonebookError]: () => false,\n});\nconst filterReducer = createReducer(initialStateFilter, {\n  'phonebook/cgangeFilter': (_, action) => action.payload,\n});\n\nconst contacts = createReducer(initialStateContacts, {\n  [fetchPhonebookSuccess]: (_, { payload }) => payload,\n\n  [addPhonebookSuccess]: (state, { payload }) => {\n    return [...state, payload];\n  },\n  [deletePhonebookSuccess]: (state, { payload }) =>\n    state.filter(({ id }) => id !== payload),\n});\n\nexport const phoneReducer = combineReducers({\n  contacts,\n  filter: filterReducer,\n  loading,\n});\n// import { combineReducers } from 'redux';\n// import phoneBookTypes from './phonebook-types';\n\n// const filterReducer = (state = '', { type, payload }) => {\n//   switch (type) {\n//     case phoneBookTypes.FILTER:\n//       return payload;\n\n//     default:\n//       return state;\n//   }\n// };\n\n// const contacts = (\n//   state = [\n//     { id: 'id-1', name: 'Rosie Simpson', number: '459-12-56' },\n//     { id: 'id-2', name: 'Hermione Kline', number: '443-89-12' },\n//     { id: 'id-3', name: 'Eden Clements', number: '645-17-79' },\n//     { id: 'id-4', name: 'Annie Copeland', number: '227-91-26' },\n//   ],\n//   { type, payload },\n// ) => {\n//   switch (type) {\n//     case phoneBookTypes.ADD_CONTACT:\n//       const normalizedName = state.find(\n//         contact => contact.name.toLowerCase() === payload.name.toLowerCase(),\n//       );\n\n//       if (normalizedName) {\n//         alert(`${payload.name} is alredy in contacts.`);\n//         return state;\n//       }\n//       return [...state, payload];\n\n//     case phoneBookTypes.DELETE:\n//       return state.filter(({ id }) => id !== payload);\n\n//     default:\n//       return state;\n//   }\n// };\n\n// export default combineReducers({\n//   contacts,\n//   filter: filterReducer,\n// });\n","// import { combineReducers } from 'redux';\n// import { configureStore } from '@reduxjs/toolkit';\n// import logger from 'redux-logger';\n// import {\n//   persistStore,\n//   FLUSH,\n//   REHYDRATE,\n//   PAUSE,\n//   PERSIST,\n//   PURGE,\n//   REGISTER,\n// } from 'redux-persist';\n\n// import { phoneReducer } from './phoneBook/phonebook-reducer';\n\n// const myMiddleware = store => next => action => {\n\n//   next(action)\n// }\n\n// const rootReducer = combineReducers({\n//   phoneBook: phoneReducer,\n\n// });\n\n// export const store = configureStore({\n//   reducer: rootReducer,\n\n//   middleware: (getDefaultMiddleware) => [\n//       ...getDefaultMiddleware({\n//        serializableCheck: {\n//         ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n//     },\n//       }),\n//     myMiddleware,\n//     logger,\n//   ],\n\n//   devTools: process.env.NODE_ENV === 'development',\n// });\n\n// export const persistor = persistStore(store);\n\n// // const feedbackStore = {\n// //   store,\n// //   persistor,\n// // };\n\nimport { configureStore } from '@reduxjs/toolkit';\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from 'redux-persist';\nimport logger from 'redux-logger';\nimport storage from 'redux-persist/lib/storage';\n\nimport authReducer from './auth/auth-slice';\nimport { phoneReducer } from './phoneBook/phonebook-reducer';\nconst middleware = getDefaultMiddleware => [\n  ...getDefaultMiddleware({\n    serializableCheck: {\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n    },\n  }),\n  logger,\n];\n\nconst authPersistConfig = {\n  key: 'auth',\n  storage,\n  whitelist: ['token'],\n};\n\nexport const store = configureStore({\n  reducer: {\n    auth: persistReducer(authPersistConfig, authReducer),\n    phoneBook: phoneReducer,\n  },\n  middleware,\n  devTools: process.env.NODE_ENV === 'development',\n});\n\nexport const persistor = persistStore(store);\n","const getIsLoggedIn = state => {\n  console.log(state, `STATE`);\n  return state.auth.isLoggedIn;\n};\n\nconst getUsername = state => {\n  console.log(state, `STATE`);\n  return state.auth.user.name;\n};\n\nconst getIsFetchingCurrent = state => state.auth.isFetchingCurrentUser;\n\nconst authSelectors = {\n  getIsLoggedIn,\n  getUsername,\n  getIsFetchingCurrent,\n};\n\nexport default authSelectors;\n","import styled from '@emotion/styled';\nimport { NavLink } from 'react-router-dom';\n\nexport const LinkNav = styled(NavLink)`\n  display: inline-block;\n  text-decoration: none;\n\n  color: #2a363b;\n\n  @media screen and (max-width: 767px) {\n    padding: 8px;\n    font-weight: 700;\n    font-size: 16px;\n  }\n\n  @media screen and (min-width: 768px) {\n    padding: 12px;\n    font-weight: 700;\n    font-size: 20px;\n  }\n\n  @media screen and (min-width: 1024px) {\n    padding: 15px;\n    font-weight: 700;\n    font-size: 24px;\n  }\n  &.activelink {\n    composes: link;\n    color: rgb(232, 74, 95);\n  }\n`;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport authSelectors from '../../redux/auth/auth-selectors';\nimport { LinkNav } from './Navigation.styled';\n\nexport default function Navigation() {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  return (\n    <nav>\n      <LinkNav to=\"/\" exact activeClassName=\"activelink\">\n        General\n      </LinkNav>\n\n      {isLoggedIn && (\n        <LinkNav to=\"/contacts\" exact activeClassName=\"activelink\">\n          Phonebook\n        </LinkNav>\n      )}\n    </nav>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/rock.22a7a8d2.jpg\";","import styled from '@emotion/styled';\n\nexport const Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nexport const Avatar = styled.img`\n  border-radius: 50%;\n  margin-right: 4px;\n\n  @media screen and (min-width: 768px) {\n    width: 50px;\n  }\n`;\n\nexport const Title = styled.span`\n  font-weight: 700;\n\n  color: white;\n  @media screen and (min-width: 768px) {\n    margin-right: 12px;\n  }\n`;\n\nexport const Name = styled.span`\n  font-size: 17px;\n  color: #e84a5f;\n`;\n\nexport const Button = styled.button`\n  width: 50px;\n  background-color: rgb(68, 68, 154);\n  border-radius: 2px;\n  color: rgb(241, 239, 235);\n  padding: 6px;\n`;\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport authOperations from '../../redux/auth/auth-operations';\nimport authSelectors from '../../redux/auth/auth-selectors';\n\nimport defaultAvatar from '../../icons/rock.jpg';\nimport { Avatar, Button, Title, Wrapper, Name } from './UserMenu.styled';\n\nexport default function UserMenu() {\n  const dispatch = useDispatch();\n  const name = useSelector(authSelectors.getUsername);\n  const avatar = defaultAvatar;\n  return (\n    <Wrapper>\n      <Avatar src={avatar} alt=\"\" width=\"45\" />\n      <Title>\n        Welcome, <Name>{name}</Name>\n      </Title>\n      <Button type=\"button\" onClick={() => dispatch(authOperations.logOut())}>\n        Logout\n      </Button>\n    </Wrapper>\n  );\n}\n","import styled from '@emotion/styled';\nimport { NavLink } from 'react-router-dom';\n\nexport const LinkNav = styled(NavLink)`\n  display: inline-block;\n  text-decoration: none;\n  padding: 12px;\n  font-weight: 700;\n\n  color: rgb(61, 57, 57);\n  @media screen and (max-width: 767px) {\n    padding: 8px;\n    font-weight: 700;\n    font-size: 16px;\n  }\n\n  @media screen and (min-width: 768px) {\n    padding: 12px;\n    font-weight: 700;\n    font-size: 20px;\n  }\n\n  @media screen and (min-width: 1024px) {\n    padding: 15px;\n    font-weight: 700;\n    font-size: 20px;\n  }\n  &.activelink {\n    composes: link;\n    color: rgb(232, 74, 95);\n  }\n`;\n","import React from 'react';\nimport { LinkNav } from './AuthNav.styled';\n\nexport default function AuthNav() {\n  return (\n    <div>\n      <LinkNav to=\"/register\" exact activeClassName=\"activelink\">\n        Create an account\n      </LinkNav>\n      <LinkNav to=\"/login\" exact activeClassName=\"activelink\">\n        Sign In\n      </LinkNav>\n    </div>\n  );\n}\n","import styled from '@emotion/styled';\n\nexport const Header = styled.header`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid #2a363b;\n  padding: 5px;\n  margin-bottom: 20px;\n`;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Navigation from '../Navigation/Navigation';\nimport UserMenu from '../UserMenu/UserMenu';\nimport AuthNav from '../AuthNav/AuthNav';\nimport authSelectors from '../../redux/auth/auth-selectors';\nimport { Header } from './AppBar.styled';\n\nexport default function AppBar() {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  return (\n    <Header>\n      <Navigation />\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\n    </Header>\n  );\n}\n","import styled from '@emotion/styled';\n\nexport const Wrapper = styled.div`\n  padding-left: 10px;\n  padding-right: 10px;\n  margin-left: auto;\n  margin-right: auto;\n  border-radius: 6px;\n\n  @media screen and (max-width: 767px) {\n    width: 320px;\n  }\n\n  @media screen and (min-width: 768px) {\n    width: 768px;\n  }\n\n  @media screen and (min-width: 1024px) {\n    padding-left: 71px;\n    padding-right: 71px;\n    width: 1024px;\n  }\n`;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Wrapper } from './Container.styled';\n\nconst Container = ({ children }) => <Wrapper>{children}</Wrapper>;\n\nContainer.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Container;\n","import { useSelector } from 'react-redux';\nimport { Route, Redirect } from 'react-router-dom';\nimport authSelectors from '../redux/auth/auth-selectors';\n\nexport default function PrivateRoute({\n  children,\n  redirectTo = '/',\n  ...routeProps\n}) {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  return (\n    <Route {...routeProps}>\n      {isLoggedIn ? children : <Redirect to={redirectTo} />}\n    </Route>\n  );\n}\n","import { useSelector } from 'react-redux';\nimport { Route, Redirect } from 'react-router-dom';\nimport authSelectors from '../redux/auth/auth-selectors';\n\nexport default function PublicRoute({\n  children,\n  redirectTo = '/',\n  restricted = false,\n  ...routeProps\n}) {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  const shouldRedirect = isLoggedIn && restricted;\n  return (\n    <Route {...routeProps}>\n      {shouldRedirect ? <Redirect to={redirectTo} /> : children}\n    </Route>\n  );\n}\n","import React, { useEffect, Suspense, lazy } from 'react';\nimport { Switch } from 'react-router-dom';\nimport AppBar from '../AppBar';\nimport Container from '../Container';\nimport { useDispatch, useSelector } from 'react-redux';\nimport authOperations from '../../redux/auth/auth-operations';\nimport PrivateRoute from '../PrivateRouter';\nimport PublicRoute from '../PublicRoute';\nimport authSelectors from '../../redux/auth/auth-selectors';\n\nconst HomeView = lazy(() => import('../../views/HomeView'));\nconst RegisterView = lazy(() => import('../../views/RegisterView'));\nconst LoginView = lazy(() => import('../../views/LoginView'));\nconst PhonebookView = lazy(() => import('../../views/PhonebookView'));\n\nexport default function App() {\n  const dispatch = useDispatch();\n  const isFetchingCurrentUser = useSelector(authSelectors.getIsFetchingCurrent);\n\n  useEffect(() => {\n    dispatch(authOperations.refreshCurrentUser());\n  }, [dispatch]);\n\n  return (\n    !isFetchingCurrentUser && (\n      <Container>\n        <AppBar />\n        <Suspense fallback={<p>Загружаем...</p>}>\n          <Switch>\n            <PublicRoute exact path=\"/\">\n              <HomeView />\n            </PublicRoute>\n            <PublicRoute exact path=\"/register\" restricted redirectTo=\"/login\">\n              <RegisterView />\n            </PublicRoute>\n            <PublicRoute exact path=\"/login\" restricted redirectTo=\"/contacts\">\n              <LoginView />\n            </PublicRoute>\n\n            <PrivateRoute path=\"/contacts\" redirectTo=\"/login\">\n              <PhonebookView />\n            </PrivateRoute>\n          </Switch>\n        </Suspense>\n      </Container>\n    )\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { store, persistor } from './redux/store';\nimport './index.css';\nimport App from './components/App/App';\nimport { PersistGate } from 'redux-persist/integration/react';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}